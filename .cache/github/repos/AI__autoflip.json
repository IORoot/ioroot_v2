{
  "id": 601049800,
  "node_id": "R_kgDOI9NKyA",
  "name": "AI__autoflip",
  "full_name": "IORoot/AI__autoflip",
  "private": false,
  "owner": {
    "login": "IORoot",
    "id": 8770616,
    "node_id": "MDQ6VXNlcjg3NzA2MTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8770616?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IORoot",
    "html_url": "https://github.com/IORoot",
    "followers_url": "https://api.github.com/users/IORoot/followers",
    "following_url": "https://api.github.com/users/IORoot/following{/other_user}",
    "gists_url": "https://api.github.com/users/IORoot/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IORoot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IORoot/subscriptions",
    "organizations_url": "https://api.github.com/users/IORoot/orgs",
    "repos_url": "https://api.github.com/users/IORoot/repos",
    "events_url": "https://api.github.com/users/IORoot/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IORoot/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "html_url": "https://github.com/IORoot/AI__autoflip",
  "description": "Machine-Learning Content-Aware video cropping tool in github action.",
  "fork": false,
  "url": "https://api.github.com/repos/IORoot/AI__autoflip",
  "forks_url": "https://api.github.com/repos/IORoot/AI__autoflip/forks",
  "keys_url": "https://api.github.com/repos/IORoot/AI__autoflip/keys{/key_id}",
  "collaborators_url": "https://api.github.com/repos/IORoot/AI__autoflip/collaborators{/collaborator}",
  "teams_url": "https://api.github.com/repos/IORoot/AI__autoflip/teams",
  "hooks_url": "https://api.github.com/repos/IORoot/AI__autoflip/hooks",
  "issue_events_url": "https://api.github.com/repos/IORoot/AI__autoflip/issues/events{/number}",
  "events_url": "https://api.github.com/repos/IORoot/AI__autoflip/events",
  "assignees_url": "https://api.github.com/repos/IORoot/AI__autoflip/assignees{/user}",
  "branches_url": "https://api.github.com/repos/IORoot/AI__autoflip/branches{/branch}",
  "tags_url": "https://api.github.com/repos/IORoot/AI__autoflip/tags",
  "blobs_url": "https://api.github.com/repos/IORoot/AI__autoflip/git/blobs{/sha}",
  "git_tags_url": "https://api.github.com/repos/IORoot/AI__autoflip/git/tags{/sha}",
  "git_refs_url": "https://api.github.com/repos/IORoot/AI__autoflip/git/refs{/sha}",
  "trees_url": "https://api.github.com/repos/IORoot/AI__autoflip/git/trees{/sha}",
  "statuses_url": "https://api.github.com/repos/IORoot/AI__autoflip/statuses/{sha}",
  "languages_url": "https://api.github.com/repos/IORoot/AI__autoflip/languages",
  "stargazers_url": "https://api.github.com/repos/IORoot/AI__autoflip/stargazers",
  "contributors_url": "https://api.github.com/repos/IORoot/AI__autoflip/contributors",
  "subscribers_url": "https://api.github.com/repos/IORoot/AI__autoflip/subscribers",
  "subscription_url": "https://api.github.com/repos/IORoot/AI__autoflip/subscription",
  "commits_url": "https://api.github.com/repos/IORoot/AI__autoflip/commits{/sha}",
  "git_commits_url": "https://api.github.com/repos/IORoot/AI__autoflip/git/commits{/sha}",
  "comments_url": "https://api.github.com/repos/IORoot/AI__autoflip/comments{/number}",
  "issue_comment_url": "https://api.github.com/repos/IORoot/AI__autoflip/issues/comments{/number}",
  "contents_url": "https://api.github.com/repos/IORoot/AI__autoflip/contents/{+path}",
  "compare_url": "https://api.github.com/repos/IORoot/AI__autoflip/compare/{base}...{head}",
  "merges_url": "https://api.github.com/repos/IORoot/AI__autoflip/merges",
  "archive_url": "https://api.github.com/repos/IORoot/AI__autoflip/{archive_format}{/ref}",
  "downloads_url": "https://api.github.com/repos/IORoot/AI__autoflip/downloads",
  "issues_url": "https://api.github.com/repos/IORoot/AI__autoflip/issues{/number}",
  "pulls_url": "https://api.github.com/repos/IORoot/AI__autoflip/pulls{/number}",
  "milestones_url": "https://api.github.com/repos/IORoot/AI__autoflip/milestones{/number}",
  "notifications_url": "https://api.github.com/repos/IORoot/AI__autoflip/notifications{?since,all,participating}",
  "labels_url": "https://api.github.com/repos/IORoot/AI__autoflip/labels{/name}",
  "releases_url": "https://api.github.com/repos/IORoot/AI__autoflip/releases{/id}",
  "deployments_url": "https://api.github.com/repos/IORoot/AI__autoflip/deployments",
  "created_at": "2023-02-13T09:03:24Z",
  "updated_at": "2025-07-25T14:00:44Z",
  "pushed_at": "2025-07-22T15:22:02Z",
  "git_url": "git://github.com/IORoot/AI__autoflip.git",
  "ssh_url": "git@github.com:IORoot/AI__autoflip.git",
  "clone_url": "https://github.com/IORoot/AI__autoflip.git",
  "svn_url": "https://github.com/IORoot/AI__autoflip",
  "homepage": "",
  "size": 1533,
  "stargazers_count": 7,
  "watchers_count": 7,
  "language": "Shell",
  "has_issues": true,
  "has_projects": true,
  "has_downloads": true,
  "has_wiki": true,
  "has_pages": false,
  "has_discussions": false,
  "forks_count": 3,
  "mirror_url": null,
  "archived": false,
  "disabled": false,
  "open_issues_count": 0,
  "license": null,
  "allow_forking": true,
  "is_template": false,
  "web_commit_signoff_required": false,
  "topics": [
    "ai",
    "github-action",
    "video-processing"
  ],
  "visibility": "public",
  "forks": 3,
  "open_issues": 0,
  "watchers": 7,
  "default_branch": "master",
  "permissions": {
    "admin": true,
    "maintain": true,
    "push": true,
    "triage": true,
    "pull": true
  },
  "readme_content": "![header](https://raw.githubusercontent.com/IORoot/AI__autoflip/refs/heads/master/header.jpg)\n\n# Custom Autoflip Container\n\nThis container is built to run in a github action.\n\nIt has a few extra packages installed to aid in auto-processing videos for social media.\n\n## Extra packages:\n\n- FFMPEG 5.1.6 Has been installed\n- https://github.com/IORoot/ffmpeg__bash-scripts scripts are installed but always require a git pull to keep in sync with latest.\n- SSH\n- SSHPass\n- rSync\n- rClone (To copy files from Google Drive.)\n\n## rClone\n\nThis requires a `~/.config/rclone/rclone.conf` file with the correct tokens to allow access to your google drive. DO NOT ADD INTO THE CONTAINER. Instead, add via a github secret through the github action.\n\nPlace the config into a secret variable called `RCLONE_CONF` and should look like this: (with XXXX,YYYY,ZZZZ with correct details. See rClone docs for generating this file)\n\n```\n[GDrive]\ntype = drive\nscope = drive\ntoken = {\"access_token\":\"XXXXX,\"token_type\":\"Bearer\",\"refresh_token\":\"YYYYY\",\"expiry\":\"2023-02-17T09:04:46.600879335Z\"}\nteam_drive = \nroot_folder_id = ZZZZZZZ\n```\n\n\n## Triggering\n\nThis github action is meant to be triggered via a HTTP request that should be something like the following:\n\n```bash\ncurl                                                            \\                                    \n-X POST                                                         \\                                   \n-H \"Accept: application/vnd.github+json\"                        \\                  \n-H \"Authorization: Bearer GITHUB_PAT_KEY\"                       \\                  \n-H \"X-GitHub-Api-Version: 2022-11-28\"                           \\                    \n    https://api.github.com/repos/ioroot/AI__autoflip/dispatches \\         \n    -d '{\"event_type\":\"gdrive_video_convert\",\"client_payload\":{ \\         \n            \"GDRIVE_FOLDER\":  \"FOLDER/IN/GDRIVE/TO/USE\",        \\            \n            \"TEMPLATE\":\"ft_simple_1-1.sh\"                       \\\n            }                                                   \\\n        }'           \n```\n\nThis triggers the github actions `event_type` to the `repository_dispatch` trigger and passes the `client_payload` as environment variables to be used further down.\n```\nrepository_dispatch:\n    types: run_autoflip\n```\n\n\n\n\n\n## Autoflip Details\nGoogle Autoflip: An Open Source Framework for Intelligent Video Reframing https://ai.googleblog.com/2020/02/autoflip-open-source-framework-for.html\n\nTool to crop video with machine learning based on MediaPipe v0.6.8.1 https://github.com/google/mediapipe/tree/de4fbc10e62001795741cb6d0200a17a94a29b0f\n\nBuild without GPU support. CPU Only.\n\n## Prerequisites\nIn order to run this container you'll need docker installed.\n\n- Windows\n- OS X\n- Linux\n\n## Usage\nQuick start\nRename the mp4 video to video.mp4 and put it in any folder for example /video/folder/path\n```\n    docker run -it -v /video/folder/path:/video lathi/autoflip:latest\n```\nIf cropping succeeds you will get a result in the folder /video/folder/path in a file named video_crop.mp4 and crop ratio 9:16.\n\n### Customise input and output files.\nYou can download test videos and put in folders for example /video/folder/path\n```\ndocker run -it -v /video/folder/path:/video \\\n    -e input_video=life_at_google.mp4 \\\n    -e output_video=life_at_google_crop_9:16.mp4 \\\n    -e aspect_ratio=9:16 \\\n    lathi/autoflip:latest\n```\nYou will get results to folder /video/folder/path\n\n### Customise config file\nYou will use Google's development config file autoflip_graph_development.pbtxt. Input will be a video.mp4 file. In the result folder, you will get cropped video called video_crop.mp4, an existing video with a frame in input video that was cropped called frames.mp4. And you will get a video with points detected by the system called points.mp4\n\n### Customise all filenames\n```\ndocker run -it -v /video/folder/path:/video \\\n    -e input_video=life_at_google.mp4 \\\n    -e output_video=life_at_google_croped_1:1.mp4 \\\n    -e aspect_ratio=1:1 \\\n    -e config=development \\\n    -e frames_output=life_at_google_1:1_frames.mp4 \\\n    -e points_output=life_at_google_1:1_points.mp4 \\\n    lathi/autoflip:latest\n```\n### Use your custom config file\nGet file from autoflip_graph_development.pbtxt. Modify it for example rename it to custom_development.pbtxt\n```\ndocker run -it -v /video/folder/path:/video \\\n    -v /config/custom_development.pbtxt:/config.pbtxt \\\n    -e config=/config.pbtxt \\\n    lathi/autoflip:latest\n```\nInput will be video.mp4 file and you will get video_crop.mp4, frames.mp4, points.mp4\n\n## Use a different folder for input and output videos\n```\ndocker run -it -v /folder/to/input/videos:/video \\\n    -v /folder/to/output/videos:/video/output \\\n    -e input_video=life_at_google.mp4 \\\n    -e output_video=output/life_at_google_3:4.mp4 \\\n    -e aspect_ratio=3:4 \\\n    -e config=development \\\n    -e frames_output=output/life_at_google_3:4_frames.mp4 \\\n    -e point_output=output/life_at_google_3:4_points.mp4 \\\n    lathi/autoflip:latest\n```\n### Run AutoFlip with default commands\nOr you can just call commands directly to run_autoflip like here Autoflip readme.\n```\ndocker run -it -e GLOG_logtostderr=1 lathi/autoflip:latest \\    \n bazel-bin/mediapipe/examples/desktop/autoflip/run_autoflip \\\n  --calculator_graph_config_file=mediapipe/examples/desktop/autoflip/autoflip_graph.pbtxt \\\n  --input_side_packets=input_video_path=/absolute/path/to/the/local/video/file,output_video_path=/absolute/path/to/save/the/output/video/file,aspect_ratio=width:height\n```\n## Environment Variables\n\n- GLOG_logtostderr - Google Logging Library log to stderr 0 or 1\n- input_video - video name in volume your added [default: video.mp4]\n- output_video - video name of the cropped video in volume [default: video_crop.mp4]\n- aspect_ratio - aspect ratio width:height [default: 9:16]\n- frames_output - name of the file with rectangle in input video that shows what parts will be cropped. Only if config=development or custom config file based on development config file [default: frames.mp4]\n- points_output - name of file with rectangle on objects recognized by algorithm. Only if config=development or custom config file based on development config file [default: points.mp4]\n- config - sets configuration file. Has two predefined values \"default\" and \"development\". \"default\" - is default config that return only cropped video with name from output_video. \"development\" - is config that return three videos: cropped video with name from output_video, video with frame in input video one cropped areas with name from frames_output, and video that points to recognized objects with name from points_output. Or can point to config file made by user that before was mounted to container for example ... -v /folder/with/custom/config/config.pbtxt:/config.pbtxt ... -e config=/config.pbtxt. [default: default]\n\n## Volumes\n- /video - Folder where all videos are processed. Sub-folder can point to different locations on host machine for example ... -v /output/path:/video/output ...\n\n## Useful File Locations\n- /mediapipe/bazel-bin/media/examples/desktop/autoflip/run_autoflip - main application it is possible to run command just from this place\n\n- /mediapipe/Dockerfile - Dockerfile that build this container\n\n- /mediapipe/examples/desktop/autoflip/autoflip_graph.pbtxt - default config file path\n\n- /mediapipe/examples/desktop/autoflip/autoflip_graph_development.pbtxt - development config file with additional options\n\n## Troubleshooting\nIf video cropped successfully application will print \"Success!\" to console in any other way if cropping started but not ended with this word cropping crashed. You can try extend swap of yours system or split video to less duration parts.\n\nAdditionally all input and output files should have same extension for example .mp4\n\n## Built With\nDocker 18.09.7\nUbuntu 18.04\nMediaPipe v0.6.8.1\n",
  "readme_html": "https://github.com/IORoot/AI__autoflip/blob/master/README.md",
  "last_cached": "2025-07-29T16:32:52.132Z"
}