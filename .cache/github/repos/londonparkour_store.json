{
  "id": 630574924,
  "node_id": "R_kgDOJZXPTA",
  "name": "londonparkour_store",
  "full_name": "IORoot/londonparkour_store",
  "private": false,
  "owner": {
    "login": "IORoot",
    "id": 8770616,
    "node_id": "MDQ6VXNlcjg3NzA2MTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8770616?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IORoot",
    "html_url": "https://github.com/IORoot",
    "followers_url": "https://api.github.com/users/IORoot/followers",
    "following_url": "https://api.github.com/users/IORoot/following{/other_user}",
    "gists_url": "https://api.github.com/users/IORoot/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IORoot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IORoot/subscriptions",
    "organizations_url": "https://api.github.com/users/IORoot/orgs",
    "repos_url": "https://api.github.com/users/IORoot/repos",
    "events_url": "https://api.github.com/users/IORoot/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IORoot/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "html_url": "https://github.com/IORoot/londonparkour_store",
  "description": "Docker-based LondonParkour store",
  "fork": false,
  "url": "https://api.github.com/repos/IORoot/londonparkour_store",
  "forks_url": "https://api.github.com/repos/IORoot/londonparkour_store/forks",
  "keys_url": "https://api.github.com/repos/IORoot/londonparkour_store/keys{/key_id}",
  "collaborators_url": "https://api.github.com/repos/IORoot/londonparkour_store/collaborators{/collaborator}",
  "teams_url": "https://api.github.com/repos/IORoot/londonparkour_store/teams",
  "hooks_url": "https://api.github.com/repos/IORoot/londonparkour_store/hooks",
  "issue_events_url": "https://api.github.com/repos/IORoot/londonparkour_store/issues/events{/number}",
  "events_url": "https://api.github.com/repos/IORoot/londonparkour_store/events",
  "assignees_url": "https://api.github.com/repos/IORoot/londonparkour_store/assignees{/user}",
  "branches_url": "https://api.github.com/repos/IORoot/londonparkour_store/branches{/branch}",
  "tags_url": "https://api.github.com/repos/IORoot/londonparkour_store/tags",
  "blobs_url": "https://api.github.com/repos/IORoot/londonparkour_store/git/blobs{/sha}",
  "git_tags_url": "https://api.github.com/repos/IORoot/londonparkour_store/git/tags{/sha}",
  "git_refs_url": "https://api.github.com/repos/IORoot/londonparkour_store/git/refs{/sha}",
  "trees_url": "https://api.github.com/repos/IORoot/londonparkour_store/git/trees{/sha}",
  "statuses_url": "https://api.github.com/repos/IORoot/londonparkour_store/statuses/{sha}",
  "languages_url": "https://api.github.com/repos/IORoot/londonparkour_store/languages",
  "stargazers_url": "https://api.github.com/repos/IORoot/londonparkour_store/stargazers",
  "contributors_url": "https://api.github.com/repos/IORoot/londonparkour_store/contributors",
  "subscribers_url": "https://api.github.com/repos/IORoot/londonparkour_store/subscribers",
  "subscription_url": "https://api.github.com/repos/IORoot/londonparkour_store/subscription",
  "commits_url": "https://api.github.com/repos/IORoot/londonparkour_store/commits{/sha}",
  "git_commits_url": "https://api.github.com/repos/IORoot/londonparkour_store/git/commits{/sha}",
  "comments_url": "https://api.github.com/repos/IORoot/londonparkour_store/comments{/number}",
  "issue_comment_url": "https://api.github.com/repos/IORoot/londonparkour_store/issues/comments{/number}",
  "contents_url": "https://api.github.com/repos/IORoot/londonparkour_store/contents/{+path}",
  "compare_url": "https://api.github.com/repos/IORoot/londonparkour_store/compare/{base}...{head}",
  "merges_url": "https://api.github.com/repos/IORoot/londonparkour_store/merges",
  "archive_url": "https://api.github.com/repos/IORoot/londonparkour_store/{archive_format}{/ref}",
  "downloads_url": "https://api.github.com/repos/IORoot/londonparkour_store/downloads",
  "issues_url": "https://api.github.com/repos/IORoot/londonparkour_store/issues{/number}",
  "pulls_url": "https://api.github.com/repos/IORoot/londonparkour_store/pulls{/number}",
  "milestones_url": "https://api.github.com/repos/IORoot/londonparkour_store/milestones{/number}",
  "notifications_url": "https://api.github.com/repos/IORoot/londonparkour_store/notifications{?since,all,participating}",
  "labels_url": "https://api.github.com/repos/IORoot/londonparkour_store/labels{/name}",
  "releases_url": "https://api.github.com/repos/IORoot/londonparkour_store/releases{/id}",
  "deployments_url": "https://api.github.com/repos/IORoot/londonparkour_store/deployments",
  "created_at": "2023-04-20T17:12:44Z",
  "updated_at": "2025-07-21T17:27:45Z",
  "pushed_at": "2023-05-29T10:18:57Z",
  "git_url": "git://github.com/IORoot/londonparkour_store.git",
  "ssh_url": "git@github.com:IORoot/londonparkour_store.git",
  "clone_url": "https://github.com/IORoot/londonparkour_store.git",
  "svn_url": "https://github.com/IORoot/londonparkour_store",
  "homepage": null,
  "size": 31,
  "stargazers_count": 0,
  "watchers_count": 0,
  "language": null,
  "has_issues": true,
  "has_projects": true,
  "has_downloads": true,
  "has_wiki": true,
  "has_pages": false,
  "has_discussions": false,
  "forks_count": 0,
  "mirror_url": null,
  "archived": true,
  "disabled": false,
  "open_issues_count": 0,
  "license": null,
  "allow_forking": true,
  "is_template": false,
  "web_commit_signoff_required": false,
  "topics": [],
  "visibility": "public",
  "forks": 0,
  "open_issues": 0,
  "watchers": 0,
  "default_branch": "master",
  "permissions": {
    "admin": true,
    "maintain": true,
    "push": true,
    "triage": true,
    "pull": true
  },
  "readme_content": "  \n\n<div id=\"top\"></div>\n\n  \n\n<div align=\"center\">\n\n  \n\n<img src=\"https://londonparkour.com/wp-content/uploads/Essential/Epic-Slider/Store_black.svg\" style=\"width:200px;\"/>\n\n  \n\n<h3 align=\"center\">London Parkour Store Infrastructure & Deployments</h3>\n\n  \n\n<p align=\"center\">\n\nThe docker-compose infrastructure and methods of deploying code / updates to the website.\n\n</p>\n\n</div>\n\n  \n\n## 1. <a name='TableofContents'></a>Table of Contents\n\n  \n\n  \n\n## 2. <a name='AboutTheProject'></a>About The Project\n\n\n## 2.1 The basics\n\nThis repository holds the `docker-compose.yml` file that will build the correct infrastructure within docker for the LondonParkour store wordpress website.\n\nThere are three containers with two volumes\n\n```mermaid\nflowchart LR\n\t\n\tstorelondonparkour_webserver_live\n\tstorelondonparkour_wordpress\n\tstorelondonparkour_mariadb\n\twebsite-data[(website-data)]\n\tdb-data[(db-data)]\n\n\tstorelondonparkour_webserver_live --> storelondonparkour_wordpress\n\tstorelondonparkour_webserver_live --> website-data\n\tstorelondonparkour_wordpress --> website-data\n\tstorelondonparkour_wordpress --> storelondonparkour_mariadb\n\tstorelondonparkour_mariadb --> db-data\n\t\n```\n\n\n## 2.2 Updating the infrastructure\n\nAll secrets and configuration are held in the `.env` file that is held within the GitHub secrets variable. Use base64 when updating the configuration.\n\nYou can then run the GitHub action on the repository to deploy onto the self-hosted runner on the same server. This runner will then pull any changes to the code or `.env` file and run `docker compose up -d` on the server.\n\n```mermaid\nflowchart LR\n\n\tsubgraph github[\"GitHub\"]\n\t\trepo[\"GitHub Repository\"]\n\t\taction[\"Github Action\"]\n\tend\n\n\tsubgraph server[\"Server\"]\n\t\trunner[\"Runner\"]\n\t\tdocker[\"Docker\"]\n\tend\n\n\trepo --> action\n\taction --> runner\n\trunner --> docker\n\n\t\n```\n\n## 2.3 Traffic / Server Infrastructure\n\nTo host multiple sites on the server you need to run an NGINX reverse proxy to point to multiple containers. Therefore the `nginx-proxy-manager` project is running on the server directing traffic and supplying certificates when needed. The proxy manager will forward on the correct traffic to the correct port / site.\n\nVisit the manager at [manager.londonparkour.com](manager.londonparkour.com)\n\n```mermaid\nflowchart LR\n\n\tsubgraph Server\n\t\tnginx[\"NGINX proxy manager :80\"]\n\t\tdocker[\"Docker\"]\n\t\twebserver1[\"LondonParkour NGINX webserver :2180\"]\n\t\twebserver2[\"Store NGINX webserver :2080\"]\n\tend\n\n\tnginx --> docker\n\tdocker --> webserver1\n\tdocker --> webserver2\n```\n\n\n\n## 3. <a name='Usage'></a>Usage\n\n## 3.1 Deploying new changes to infrastructure\n\nTo change the infrastructure, you can do the following:\n\n1. Change the repository code and push to `master`\n2. Update the `.env.live` code and run `cat .env.live | base64` then copy into the `ENV_LIVE_B64`  variable in github > settings > secrets & variables > Actions > Secrets\n3. Run the github action manually Github > Actions > DigitalOcean_Deploy_Live > Run workflow\n4. Check new infrastructure.\n\n\n## 3.2 Deploy new website code\n\nUse the `vump_site` tool to deploy new code up / down from a development version to live. The `vump` tool will copy the database SQL file and site code into a new backup image and push up to a container registry. You can then use the same tool to load the new code into the live site.\n\nAll variables for `vump` are stored within the same `.env` file. This specifies the correct site volume, database container, database credentials and repository to use.\n\n### 3.2.1 Part 1 - Save (On Development Environment)\n\n1. On the DEVELOPMENT instance on the website on your laptop. \n2. Login to the dockerhub repository account that stores the backups. `docker login --username londonparkourstore --password ???`\n3. Edit the `.env` file if needed to make sure you have the correct settings. If any settings are missing, `vump_site` will ask the question.\n4. Make sure you have the `vump` and `vump_site` tools installed [https://github.com/IORoot/docker-vump](https://github.com/IORoot/docker-vump) and they are linked in the `/usr/local/bin` folder. `vump_site` runs `vump`.\n5. Run `vump_site` in the same folder as the `.env` file and push the backup up to the repository.\n\n### 3.2.2 Part 2 - Load (On Production Environment)\n\n1. SSH into the production server\n2. Make sure you have the `vump` and `vump_site` tools installed [https://github.com/IORoot/docker-vump](https://github.com/IORoot/docker-vump) and they are linked in the `/usr/local/bin` folder. `vump_site` runs `vump`.\n3. Move into the folder with the live `.env` file. `cd /home/runner/actions-runnner-londonparkourstore/_work/londonparkourstore/londonparkourstore`\n4. Login to the dockerhub repository account that stores the backups. `docker login --username londonparkourstore --password ???`\n5. Run the `vump_site` and load the data from the repository.\n\n### Notes\n\nWithin the `.env` file on both the local and live sites, the VUMP parts should be the same if you are using the same infrastructure on both.\n\n\n## 3.3 The Actions-Runner\n\nThere is a self-hosted github runner on the box with a user `/home/runner`. There are currently three runners, one for the store, one for londonparkour.com and one for the nginx-proxy-manager.\nYou can start / stop / status the runner with the commands:\n\n(Note `action-runner` was the first runner on the server and the store was used for this one. Which is why it doesn't have a suffix actions-runner-store)\n```bash\n/home/runner/actions-runner/svc.sh start\n/home/runner/actions-runner/svc.sh stop\n/home/runner/actions-runner/svc.sh status\n/home/runner/actions-runner/svc.sh install\n/home/runner/actions-runner/svc.sh uninstall\n```\n\n## 3.4 PHP\n---\nYou can configure the `php.ini` file by editing the `/config/php/uploads.ini` file and restarting the `wordpress` container.\n\n\n\n## 4. <a name='Troubleshooting'></a>Troubleshooting\n\n## 4.1 Things to check:\n\n- `.env`\n- `.env.live` has been put into github correctly.\n- `fastcgi_pass londonparkourstore_wordpress:9000;` line in the `config/nginx/nginx-conf-live/nginx.conf` file.\n- correct ports / ssl in the [manager](manager.londonparkour.com)\n\n  \n  \n\n## 6. <a name='Changelog'></a>Changelog\n\nv1.0.0\n- Initial deployment to docker for infrastructure.\n\n",
  "readme_html": "https://github.com/IORoot/londonparkour_store/blob/master/readme.md",
  "last_cached": "2025-07-29T16:32:52.132Z"
}