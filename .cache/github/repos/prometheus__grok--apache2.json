{
  "id": 218358688,
  "node_id": "MDEwOlJlcG9zaXRvcnkyMTgzNTg2ODg=",
  "name": "prometheus__grok--apache2",
  "full_name": "IORoot/prometheus__grok--apache2",
  "private": false,
  "owner": {
    "login": "IORoot",
    "id": 8770616,
    "node_id": "MDQ6VXNlcjg3NzA2MTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8770616?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IORoot",
    "html_url": "https://github.com/IORoot",
    "followers_url": "https://api.github.com/users/IORoot/followers",
    "following_url": "https://api.github.com/users/IORoot/following{/other_user}",
    "gists_url": "https://api.github.com/users/IORoot/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IORoot/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IORoot/subscriptions",
    "organizations_url": "https://api.github.com/users/IORoot/orgs",
    "repos_url": "https://api.github.com/users/IORoot/repos",
    "events_url": "https://api.github.com/users/IORoot/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IORoot/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "html_url": "https://github.com/IORoot/prometheus__grok--apache2",
  "description": "Grok_exporter yaml config files for Apache2 access and error logs. For use with Prometheus.",
  "fork": false,
  "url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2",
  "forks_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/forks",
  "keys_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/keys{/key_id}",
  "collaborators_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/collaborators{/collaborator}",
  "teams_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/teams",
  "hooks_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/hooks",
  "issue_events_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/issues/events{/number}",
  "events_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/events",
  "assignees_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/assignees{/user}",
  "branches_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/branches{/branch}",
  "tags_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/tags",
  "blobs_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/git/blobs{/sha}",
  "git_tags_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/git/tags{/sha}",
  "git_refs_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/git/refs{/sha}",
  "trees_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/git/trees{/sha}",
  "statuses_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/statuses/{sha}",
  "languages_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/languages",
  "stargazers_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/stargazers",
  "contributors_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/contributors",
  "subscribers_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/subscribers",
  "subscription_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/subscription",
  "commits_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/commits{/sha}",
  "git_commits_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/git/commits{/sha}",
  "comments_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/comments{/number}",
  "issue_comment_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/issues/comments{/number}",
  "contents_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/contents/{+path}",
  "compare_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/compare/{base}...{head}",
  "merges_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/merges",
  "archive_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/{archive_format}{/ref}",
  "downloads_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/downloads",
  "issues_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/issues{/number}",
  "pulls_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/pulls{/number}",
  "milestones_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/milestones{/number}",
  "notifications_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/notifications{?since,all,participating}",
  "labels_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/labels{/name}",
  "releases_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/releases{/id}",
  "deployments_url": "https://api.github.com/repos/IORoot/prometheus__grok--apache2/deployments",
  "created_at": "2019-10-29T18:44:09Z",
  "updated_at": "2025-07-22T09:55:34Z",
  "pushed_at": "2022-07-06T14:53:20Z",
  "git_url": "git://github.com/IORoot/prometheus__grok--apache2.git",
  "ssh_url": "git@github.com:IORoot/prometheus__grok--apache2.git",
  "clone_url": "https://github.com/IORoot/prometheus__grok--apache2.git",
  "svn_url": "https://github.com/IORoot/prometheus__grok--apache2",
  "homepage": "",
  "size": 13,
  "stargazers_count": 0,
  "watchers_count": 0,
  "language": "Shell",
  "has_issues": true,
  "has_projects": true,
  "has_downloads": true,
  "has_wiki": true,
  "has_pages": false,
  "has_discussions": false,
  "forks_count": 0,
  "mirror_url": null,
  "archived": false,
  "disabled": false,
  "open_issues_count": 0,
  "license": null,
  "allow_forking": true,
  "is_template": false,
  "web_commit_signoff_required": false,
  "topics": [
    "apache2",
    "grok-exporter",
    "prometheus"
  ],
  "visibility": "public",
  "forks": 0,
  "open_issues": 0,
  "watchers": 0,
  "default_branch": "master",
  "permissions": {
    "admin": true,
    "maintain": true,
    "push": true,
    "triage": true,
    "pull": true
  },
  "readme_content": "\n<div id=\"top\"></div>\n\n<div align=\"center\">\n\n<img src=\"https://svg-rewriter.sachinraja.workers.dev/?url=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2F%40mdi%2Fsvg%406.7.96%2Fsvg%2Fregex.svg&fill=%239A3412&width=200px&height=200px\" style=\"width:200px;\"/>\n\n<h3 align=\"center\">Grok_exporter for Apache2</h3>\n\n<p align=\"center\">\n    Grok_exporter yaml config files for Apache2 access and error logs. For use with Prometheus.\n</p>\n</div>\n\n\n##  1. <a name='TableofContents'></a>Table of Contents\n\n\n\n* 1. [Table of Contents](#TableofContents)\n* 2. [About The Project](#AboutTheProject)\n\t* 2.1. [Built With](#BuiltWith)\n* 3. [Getting Started](#GettingStarted)\n\t* 3.1. [Installation](#Installation)\n\t\t* 3.1.1. [Apache.](#Apache.)\n\t\t* 3.1.2. [Grok_exporters](#Grok_exporters)\n\t\t* 3.1.3. [Prometheus](#Prometheus)\n* 4. [Usage](#Usage)\n* 5. [Contributing](#Contributing)\n* 6. [License](#License)\n* 7. [Contact](#Contact)\n* 8. [Changelog](#Changelog)\n\n\n\n##  2. <a name='AboutTheProject'></a>About The Project\n\nThese are grok_exporter (https://github.com/fstab/grok_exporter) configuration YAML files for extended Apache log files. It allows you to see three main metrics:\n\n1. A total count of errors in the Apache2 errors.log, split (labelled) by the Language of the error (Usually PHP in my case) and the title of the error. This won't output any stack trace lines from the log.\nThis means you will be able to see lines on your prometheus graph for each combination of language and error title (first word proceeding the language in the log file).\n\n2. A total count of responses in the Apache2 access.log, split (labelled) by each response code. (200, 404, 500, etc..). This will allow you to track the rate of these types of responses.\n\n3. A guage of the latency of the requests made by Apache2 in microseconds. This is split (labelled) by both the response code (200,404,500,etc...) and the file being requested. This will allow you to see which files take the longest to be served and how long they take. It will also show which files are erroring.\n\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n###  2.1. <a name='BuiltWith'></a>Built With\n\nThis project was built with the following frameworks, technologies and software.\n\n* [PHP](https://php.net/)\n* [Composer](https://getcomposer.org/)\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n\n\n##  3. <a name='GettingStarted'></a>Getting Started\n\n\n###  3.1. <a name='Installation'></a>Installation\n\n\nA few things need to happen to set up the grok_exporter configs correctly.\n\n####  3.1.1. <a name='Apache.'></a>Apache. \n\nA new 'LogFormat' line in the `/etc/apache2/apache2.conf` config file (on ubuntu) was created to include the request duration and filename into the log lines. THis consisted of:\n\n```\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %D %f\" extended\n```\nThe %D and %f are the variable that provide those pieces of information.\n\nNext, the vhost file `CustomLog` eentry needs to now use that new log format, so change the line to:\n\n```\nCustomLog ${APACHE_LOG_DIR}/access.log extended \n```\n\nThis means the access.log will now use the 'extended' LogFormat just created.\n\n####  3.1.2. <a name='Grok_exporters'></a>Grok_exporters\n\nThere are a couple of separate one-liner shell scripts to run the separate grok_exporter instances in the background. Note that they are running on two diffrent ports for prometheus to poll. \n\n- Gotcha 1: Remember to open up those ports on your firewall with IPTables!\n- Gotcha 2: Grok_exporter cannot run multiple configs / log files at the same time, so multiple instances are required.\n\n####  3.1.3. <a name='Prometheus'></a>Prometheus\n\nFor Prometheus to pick up the grok_exporters, you'll need to make sure that you include your grok_exporter instances. Edit you `Prometheus.yml` file with the two new targets.\n\n```\n- job_name: grok_errors\n    target_groups:\n      - targets: ['localhost:9144']\n\n  - job_name: grok_responses\n    target_groups:\n      - targets: ['localhost:9145']\n```\n\nReload the prometheus config with a curl request: `curl -X POST http://localhost:9090/-/reload`\n\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n##  4. <a name='Usage'></a>Usage\n\nHere are some links to things that helped along the way...\n\n- [https://github.com/fstab/grok_exporter](https://github.com/fstab/grok_exporter)\n- [https://prometheus.io/docs/prometheus/latest/querying/api/](https://prometheus.io/docs/prometheus/latest/querying/api/)\n- [http://grokdebug.herokuapp.com/](http://grokdebug.herokuapp.com/)\n- [http://www.ducea.com/2008/02/06/apache-logs-how-long-does-it-take-to-serve-a-request/](http://www.ducea.com/2008/02/06/apache-logs-how-long-does-it-take-to-serve-a-request/)\n- [https://stackify.com/apache-error-log-explained/](https://stackify.com/apache-error-log-explained/)\n- [https://streamsets.com/documentation/datacollector/latest/help/datacollector/UserGuide/Apx-GrokPatterns/GrokPatterns_title.html](https://streamsets.com/documentation/datacollector/latest/help/datacollector/UserGuide/Apx-GrokPatterns/GrokPatterns_title.html)\n\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n##  5. <a name='Contributing'></a>Contributing\n\nContributions are what make the open source community such an amazing place to learn, inspire, and create. Any contributions you make are **greatly appreciated**.\n\nIf you have a suggestion that would make this better, please fork the repo and create a pull request. You can also simply open an issue.\nDon't forget to give the project a star! Thanks again!\n\n1. Fork the Project\n2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)\n3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)\n4. Push to the Branch (`git push origin feature/AmazingFeature`)\n5. Open a Pull Request\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n##  6. <a name='License'></a>License\n\nDistributed under the MIT License.\n\nMIT License\n\nCopyright (c) 2022 Andy Pearson\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n##  7. <a name='Contact'></a>Contact\n\nProject Link: [https://github.com/IORoot/...](https://github.com/IORoot/...)\n\n<p align=\"right\">(<a href=\"#top\">back to top</a>)</p>\n\n\n\n##  8. <a name='Changelog'></a>Changelog\n\nv1.0.0 - First version.\n",
  "readme_html": "https://github.com/IORoot/prometheus__grok--apache2/blob/master/README.md",
  "last_cached": "2025-07-29T16:32:52.132Z"
}